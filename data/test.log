/*C5*/SET SCHEMA PUBLIC
drop table if exists Artiste cascade 
drop table if exists Concert cascade 
drop table if exists Organisateur cascade 
drop table if exists Ticket cascade 
drop table if exists User cascade 
create table Artiste (id bigint generated by default as identity (start with 1), biographie varchar(255), nom varchar(255), prenom varchar(255), primary key (id))
create table Concert (capacity integer not null, date date, prix integer not null, artiste_id bigint unique, id bigint generated by default as identity (start with 1), organisateur_id bigint, lieu varchar(255), primary key (id))
create table Organisateur (id bigint not null, primary key (id))
create table Ticket (prix float(53) not null, concert_id bigint, id bigint generated by default as identity (start with 1), user_id bigint, primary key (id))
create table User (age integer not null, id bigint generated by default as identity (start with 1), codePostal varchar(255), email varchar(255), nom varchar(255), password varchar(255), prenom varchar(255), sexe varchar(255) check (sexe in ('HOMME','FEMME')), tel varchar(255), primary key (id))
alter table Concert add constraint FKlrjfrpg8pqd1yls3rujwd5d9n foreign key (artiste_id) references Artiste
alter table Concert add constraint FKtkdwqgasjvmoayedcis243y1l foreign key (organisateur_id) references Organisateur
alter table Organisateur add constraint FKcgva0tji7gxmw5vsnq509good foreign key (id) references User
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKm1xvucrvrnk55qhem8xmvju6h foreign key (user_id) references User
INSERT INTO USER VALUES(25,1,'75000','john.doe@email.com','John','password123','Doe','HOMME','123456789')
INSERT INTO ORGANISATEUR VALUES(1)
INSERT INTO ARTISTE VALUES(1,'Chanteur Britannique','Ed Sheeran','Edward')
INSERT INTO CONCERT VALUES(5000,'2025-02-05',0,1,1,1,'Paris')
INSERT INTO USER VALUES(25,2,'75000','alice.smith@email.com','Alice','password456','Smith','FEMME','123456789')
INSERT INTO TICKET VALUES(50.0E0,1,1,2)
INSERT INTO TICKET VALUES(80.0E0,1,2,2)
INSERT INTO TICKET VALUES(30.0E0,1,3,2)
COMMIT
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
